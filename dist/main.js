!function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o="http://localhost:3030";var l=e=>fetch(o+"/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw new Error("не удалось создать заметку")}),r=()=>fetch(o+"/list").then(e=>{if(!e.ok)throw new Error("Ошибка загрузки списка заметок");return e.json()}),d=()=>fetch(o+"/statistics").then(e=>{if(!e.ok)throw new Error("Ошибка загрузки статистики");return e.json()}),a=(e,t)=>fetch(`${o}/edit/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(!e.ok)throw new Error("ошибка при редактировании")}),i=e=>fetch(`${o}/delete/${e}`,{method:"DELETE"}).then(e=>{if(!e.ok)throw new Error("ошибка при удалении")});const s=(e,t,n={})=>{const o=document.createElement(e);return o.textContent=t,Object.keys(n).forEach(e=>{o.setAttribute(e,n[e])}),o},c=(e,t)=>{for(;e;){if(e.classList.contains(t))return e;e=e.parentNode}return null},p=document.querySelector(".form__input"),u=document.querySelector(".form__textarea"),h=document.querySelector(".form__btn"),v=document.querySelector(".list-cont"),f=document.querySelector(".error-cont"),m=document.querySelector(".stat__bar"),C=s("div",null,{class:"error-msg"}),b=s("div",null,{class:"error"}),g=s("img",null,{class:"error-img",src:"../icon/error.svg"}),y=document.getElementsByName("color__check"),_={white:"var(--beige)",pink:"var(--lightpink)",skyblue:"var(--skyblue)",green:"var(--lightgreen)",orange:"var(--lightorange)"},k=s("ul",null,{id:"list"}),x=()=>{v.appendChild(k),r().then(e=>{k.innerHTML='<div class="exist-info"><img src="./icon/info.svg" alt=""><span>заметок пока нет</span></div>',m.innerHTML='<div class="stat-info"><span>заметок пока нет</span></div>',e.forEach(e=>{E(e,k)})}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),k.appendChild(C)})};y.forEach(e=>{"var(--beige)"===e.value&&(e.checked=!0),e.addEventListener("change",()=>{c(e,"block").style.background=e.value})});const E=(e,t)=>{const n=document.querySelector(".exist-info");n&&n.remove(),m.innerHTML='<div class="stat__open">\n    <span>открытых:  заметок</span>\n    <div class="open-bar">\n        <div class="open__line"></div>\n    </div>\n</div>\n<div class="stat__close">\n    <span>закрытых:  заметок</span>\n    <div class="close-bar">\n        <div class="close__line"></div>\n    </div>',d().then(e=>{const t=document.querySelector(".open__line"),n=document.querySelector(".close__line"),o=document.querySelector(".stat__open span"),l=document.querySelector(".stat__close span");o.textContent=`ОТКРЫТЫХ: ${e.undone} ЗАМЕТОК`,l.textContent=`ЗАКРЫТЫХ: ${e.done} ЗАМЕТОК`,t.style.width=100/e.total*e.undone+"%",n.style.width=100/e.total*e.done+"%"}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),m.appendChild(C),console.log(C)});const o=s("li",null,{class:"col-12 col-md-6 col-lg-3 mb-4"}),l=s("div",null,{class:"li-obj block"}),r=s("div",e.text,{class:"task-name"}),p=s("button",null,{class:"del-btn"}),u=s("button",null,{class:"edit-btn"}),h=s("button",null,{class:"done-btn"}),f=s("div",e.description,{class:"task-desc"}),y=s("div",null,{class:"task-error"});l.appendChild(f),l.appendChild(h),l.appendChild(p),l.appendChild(r),l.appendChild(y),l.appendChild((()=>{const t=s("div",null,{class:"color"});return Object.keys(_).forEach(n=>{const o=s("label",null,{}),l=s("input",null,{type:"radio",name:""+e.text,value:""+_[n]}),r=s("div",null,{class:n+" color-pick"});o.appendChild(l),o.appendChild(r),t.appendChild(o),"var(--beige)"===l.value&&(l.checked=!0),l.addEventListener("change",()=>{c(l,"block").style.background=l.value})}),t})()),o.appendChild(l),e.done&&h.classList.toggle("done"),t.appendChild(o),v.appendChild(t),h.addEventListener("click",()=>{a(e.id,{done:!e.done}).then(()=>{t.remove(),x()})}),r.addEventListener("click",()=>{const n=s("input",null,{class:"task-name"});n.type="text",n.value=e.text,u.disabled=!0,l.insertBefore(n,r),l.removeChild(r),n.addEventListener("change",()=>{a(e.id,{text:n.value}).then(()=>{t.remove(),x()}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),y.appendChild(C)})})}),f.addEventListener("click",()=>{const n=s("textarea",null,{class:"task-desc"});n.value=e.description,l.insertBefore(n,f),l.removeChild(f),n.addEventListener("change",()=>{a(e.id,{description:n.value}).then(()=>{t.remove(),x()}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),y.appendChild(C)})})}),p.addEventListener("click",()=>{i(""+e.id).then(()=>{t.remove(),x()}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),y.appendChild(C)})})};h.addEventListener("click",()=>{l({text:p.value,description:u.value}).then(()=>{document.querySelector("#list").remove(),C.remove(),x()}).catch(e=>{C.appendChild(g),b.textContent=e.message,C.appendChild(b),f.appendChild(C)}),p.value="",u.value=""}),x()}]);